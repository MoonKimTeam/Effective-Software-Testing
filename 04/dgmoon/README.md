# Chapter 04 계약 설계

- 제약사항 모델링
    - 클래스가 다른 클래스를 유효하지 않은 입력으로 절대로 호출하지 못하도록 하기: 코드 단순화 but 복잡
    - 방어적 작성. 비유효 입력 -> 시스템 중단, 에러 메시지 전달: 시스템 탄력화 but 비생산적
    - best: 개발 중인 클래스에 명확한 계약을 정의

## 사전 조건 사후 조건

- 사전 조건: 예) 음수 값을 받을 수 없음
- 사후 조건: 예) 음수 값을 반환하지 않음
- 문서에 사전 사후 조건을 명확히 기술하는 것은 매우 중요

### 단언 키워드(assert) - 활성화 필요

assert를 쓸지 예외를 던질 지는 팀에서 결정할 사항

- AssertionError라는 획일화된 오류 던지므로 쓰지말자는 주장도 있음

### 강한 조건, 약한 조건

- 조건의 강도: 프로그램을 중지하거나(강) 비유효 값도 받도록 하기, -1 이나 0 반환하기 등(약)

cf) 계약에 의한 설계(DbC, Design by Contract, 마이어)
저자의 관점은 DbC보다 더 실용적

## 불변식

- 불변식: 사전, 사후에 모두 유지되어야 하는 "조건"
- 불변식 테스트는 5장 속성 기반 테스트에서 설명

## 계약 변경과 리스코프 치환 법칙

- 계약 변경 시 그 변경으로 인한 영향 파악 필요
- 상속과 계약: 서브 타입핑으로 계약을 서로 다르게 적용할 수 있음
- 리스코프 치환 법칙: 시스템에 기대하는 동작을 깨뜨리지 않고 자식 클래스를 부모 클래스로 치환할 수 있는 개념

## 게약에 의한 설계와 테스트
- 이점
  - 단언문을 통해 버그를 일찍 발견 가능
  - 사전 조건, 사후 조건, 불변식은 테스트 대상을 제공
  - 명시적인 계약은 소비자의 삶을 편안하게 해줌 
## 현업

### 강한 사전 조건 vs. 약한사전 조건

### 입력 유효성 검사 vs. 계약 vs. 둘 다

### 단언 vs. 예외

### 예외 vs. 부드러운 반환값

### 계약에 의한 설계 사용하지 않는 경우

### 사전 조건, 사후 조건, 불변식에 대한 테스 작성 여부

### 지원 도구

