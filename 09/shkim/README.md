# 대규모 테스트 작성

## 대규모 테스트 사용 시기

대규모 테스트를 사용해야 하는 두 가지 경우가 있다.

- 각 개별 클래스에 대한 테스트는 수행했지만, 전체 동작이 여러 클래스로 구성되어 있어 함께 구동될때 어떤 일이 일어나는지 확인하고 싶을 경우.
- 테스트하려는 클래스가 거대한 플러그 앤 플레이 아키텍처의 구성요소일때.

## 데이터베이스와 SQL 테스트

### SQL 쿼리에서 테스트해야 하는 것

- **SQL 조건문을 위한 수정된 조건/의사결정 커버리지 적용**: SQL문에서는 의사결정이 일어나는 join, where, having 세 군데가 존재한다.
- **널 처리를 위한 MC/DC적용**: 쿼리에서 값이 널이 될 가능성을 고려해야 한다.
- **선택한 데이터에 대한 범주-구획 처리**: 
  - **행을 검색하는 경우**: 쿼리가 어떠한 행도 검색하지 못하도록 하는 테스트 상태를 포함한다.
  - **행을 병합하는 경우**: 쿼리 결과에 의도치 않은 중복 행이 나타나는 일은 흔하게 볼 수 있다. 동일한 행을 선택하는 테스트 상태를 포함한다.
  - **행을 그룹화하는 경우**: 각각의 group-by 열에 대해 적어도 두 개의 서로 다른 그룹을 얻도록 테스트 상태를 설계한다.
  - **행을 서브쿼리로 검색하는 경우**: 각각의 서브쿼리에 대해 0개 이상의 행을 반환하는 테스트 상태를 포함한다.
  - **값이 집계 함수에 참여하는 경우**: 각각의 집계 함수에 대해 함수가 두 개의 같은 값과 하나의 다른 값을 가지도록 하는 테스트 상태를 하나 이상 포함한다.
- **출력값 검사**: 우리는 입력 도메인뿐 아니라 출력 도메인도 검사해야 한다.

## 대규모 테스트에 대한 논의

### 테스트를 어느 수준으로 해야 할까 ?

모든 것을 단위 수준에서 수행하고, 대규모 테스트에서는 가장 중요한 행위를 수행하자.

### 비용/이득 분석을 수행하자

대규모 테스트는 작성하고 실행하고 유지 보수 하는 비용이 적지 않을 수 있다. 따라서 간단하게 비용/이득 분석을 수행하는 일은 기본이다. <br>
많은 경우 테스트를 통해 얻는 이득은 비용보다 크기 때문에, 대부분의 경우 테스트를 작성해야 한다. <br>
비용이 너무 크다면 테스트를 단순화할 수 있는지 고려하자. (테스트의 일부를 스텁으로 바꿀 수 있는지, 시스템의 작은 일부를 집중해서 수행하는 테스트를 작성할 수 있는지 등)













