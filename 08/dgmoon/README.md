# Chapter 08 테스트 주도 개발

테스트 주도 개발(TDD): 기존의 "코드 작성 후 테스트"하는 방식과 다르게 테스트 코드 작성, 테스트, 리팩터링을 반복하는 방식

## 첫 번째 TDD 세션

로마 숫자 정수형으로 바꾸기

테스트 케이스 도출, 핵심 로직 테스트 코드 작성 -> 컴파일 에러, 테스트 실패
-> 코드 작성(클래스 생성, 스켈레톤 작성) -> 테스트 실패
-> 하드 코딩으로 테스트가 통과하게 작성 -> 테스트 통과
-> 중복 제거, 리팩터링
-> 두 개 이상 문자 등 다른 시나리오 테스트 -> 테스트 통과. 실패 시 수정
-> 중복 제거, 리팩터링 -> 테스트 통과 확인 후 실패 시 반복

## TDD에 대한 고찰

빨강-초록-리팩터 주기: 테스트 작성, 테스트 실패 -> 기능 구현, 테스트 통과 -> 리팩터링

이점

- 요구사항을 먼저 잘 살펴보게 됨
- 제품 코드 작성 속도를 완전히 제어할 수 있음
- 피드백이 빠름
- 테스트 가능한(용이한) 코드를 작성하게 됨
- 설계 피드백 얻을 수 있음

## 현업

### TDD냐, 아니냐

- TDD가 주는 리듬(구현할 간단한 기능 찾기 -> 테스트 작성 -> 구현)
- 개발 속도 조절 가능
- 코드를 자주 검토하게 됨
- 최선의 클래스 설계 방식 발견, 선택 가능
- 피드백을 빠르고 시기적절하게 얻을 수 있음

### 항상 TDD를 사용해야 할까 -> No

- 설계, 아키텍처, 요구사항에 대한 구현 방법이 명확하지 않을때
- 복잡한 문제를 다루거나, 그 문제에 관한 전문성이 부족할 때
- 개발 과정에서 배울만한 것이 있을 때만

### TDD는 모든 종류의 애플리케이션과 도메인에서 동작하는가

애플리케이션에서 자동 테스트를 작성할 수 있다면 TDD는 항상 수행 가능함

### TDD 관련 연구

- TDD 사용자가 TDD 비사용자에 비해 알고리즘을 덜 복잡하게 만들고 수행 범위가 더 넓은 테스트를 작성함(자넨)
- TDD로 만든 코드가 객체 지향 개념을 더 잘 사용하고 책임을 여러 클래스에 분산하도록 함(자넨, 사이에디안)
- 개발 초기에 TDD 비숙련 개발자는 생산성이 떨어질 수 있지만, 대다수의 개발자는 코드 품질 향상에 도움이 된다고 생각함(조지, 윌리엄스)
- TDD를 사용할 때 클래스 설계 개선이 있음(도그사, 바티지)
- TDD가 생산성을 향상시키나 코드 품질에는 변화 없음(어도그머스)
- TDD를 적용한 프로젝트의 배포 전 결함 밀도가 그렇지 않은 프로젝트에 비해 감소(나가판)
- 개발 이전, 이후에 상관없이 테스트 작성이 중요함(푸치, 제로사)

### TDD 학파들

TDD는 시작하는 방법이나 어떤 테스트 작성하는지 안 알려줌 -> 다양한 TDD 학파 등장

- 고전주의 TDD 학파(디트로이트 TDD, 인사이드아웃 TDD)
    - 전체 기능을 구성하게 될 여러 단위로(안쪽에서부터) TDD 주기 시작
    - 모의 객체 지양
    - 테스트하기 어려운 객체는 사용하기도 어려움
- 모의 객체중심주의 TDD(모키스트, 런던 TDD 학파. 아웃사이드인 TDD)
    - 바깥쪽에서부터 시작
    - 단위를 격리하여 테스트 선호
    - 모의하기 어려운 의존성은 다른 객체가 그 의존성을 사용하기도 어려움
- 필자는 두 학파 혼합
    - 안쪽에서 바깥쪽으로
    - 그러나 단위 테스트 선호

### TDD와 정식 테스트

TDD 사용자가 테스트 케이스 더 많이 작성하기는 하지만 덜 체계적임 <- TDD는 테스트에 집중 X, 그저 개발 도와주는 도구

TDD와 효율적인 테스트를 조합해서 사용 필요